#!/usr/bin/env python3
"""
kfg-client - Simple client to trigger kfg daemon from any process
"""

import os
import socket
import sys

SOCKET_PATH = os.path.expanduser("~/.kfg_socket")

def main():
    try:
        sock = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
        sock.connect(SOCKET_PATH)
        
        message = "trigger"
        if len(sys.argv) > 1:
            message = " ".join(sys.argv[1:])
        
        sock.send(f"{message}\n".encode())
        response = sock.recv(1024).decode('utf-8').strip()
        sock.close()
        
        print(f"Response: {response}")
        return 0
    except Exception as e:
        print(f"Error: {e}")
        print("Is kfg daemon running? Start it with 'kfg'")
        return 1

if __name__ == "__main__":
    sys.exit(main())